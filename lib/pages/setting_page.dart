import 'package:flutter/cupertino.dart';import 'package:flutter/material.dart';import 'package:provider/provider.dart';import 'package:weather_app/blocs/weather_bloc.dart';import 'package:weather_app/data/location_notifier.dart';import 'package:weather_app/pages/home_page.dart';import 'package:shared_preferences/shared_preferences.dart';import 'package:weather_app/prefs/preferences.dart';class SettingPage extends StatefulWidget {  @override  _SettingPageState createState() => _SettingPageState();}class _SettingPageState extends State<SettingPage> {  TextEditingController _textLocation = TextEditingController();  String locationShared = '';  String textData = '';  @override  void initState() {    super.initState();    isiText().then(      (String value) {        setState(          () {            textData = value;          },        );      },    );  }  @override  Widget build(BuildContext context) {    final locationNotifier = Provider.of<LocationNotifier>(context);    return Scaffold(      appBar: AppBar(        leading: IconButton(          icon: Icon(            Icons.arrow_back_ios,            color: Colors.white,          ),          onPressed: () {            Navigator.pop(context);          },        ),        title: Text('Setting'),      ),      body: Container(        margin: EdgeInsets.all(10),        child: ListView(          children: <Widget>[            ListTile(              title: Text('Location',                  style: TextStyle(fontWeight: FontWeight.bold)),              subtitle: Text(                locationNotifier.getLoc.toString(),                style: TextStyle(fontSize: 12),              ),              onTap: () {                showDialog(                    context: context,                    builder: (context) {                      return AlertDialog(                        title: Text('Change Location'),                        content: TextField(                          controller: _textLocation,                          decoration:                              InputDecoration(hintText: "Your Location"),                        ),                        actions: <Widget>[                          new FlatButton(                            child: new Text('ADD'),                            onPressed: () async {                              print("DIKLIK");                              setState(                                () {                                  Prefs.setString(_textLocation.text);                                  locationNotifier.setLoc(textData);                                },                              );                              _textLocation.text = '';                              Navigator.of(context).pop();                            },                          ),                          FlatButton(                            child: new Text('CANCEL'),                            onPressed: () {                              Navigator.of(context).pop();                            },                          ),                        ],                      );                    });              },            ),            Divider(),            ListTile(              title: Text('Temperature Units',                  style: TextStyle(fontWeight: FontWeight.bold)),              subtitle: Text(                'Metric',                style: TextStyle(fontSize: 12),              ),            ),            Divider(),            ListTile(              title: Text('Weather Notifications',                  style: TextStyle(fontWeight: FontWeight.bold)),              subtitle: Text(                'Enabled',                style: TextStyle(fontSize: 12),              ),            ),            Divider(),          ],        ),      ),    );  }  _displayDialog(      BuildContext context, LocationNotifier locationNotifier) async {    return showDialog(      context: context,      builder: (context) {        return AlertDialog(          title: Text('Change Location'),          content: TextField(            controller: _textLocation,            decoration: InputDecoration(hintText: "Your Location"),          ),          actions: <Widget>[            new FlatButton(              child: new Text('ADD'),              onPressed: () async {                print("DIKLIK");                setState(                  () async {                    locationNotifier.setLoc(textData);                    Prefs.setString(_textLocation.text);                  },                );                _textLocation.text = '';                Navigator.of(context).pop();              },            ),            FlatButton(              child: new Text('CANCEL'),              onPressed: () {                Navigator.of(context).pop();              },            ),          ],        );      },    );  }}Future<String> isiText() async {  String data = await Prefs.getString();  print('CEKKKKKKKKKK ' + data);  return data;}